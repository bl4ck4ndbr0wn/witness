{"version":3,"sources":["../src/index.js"],"names":["app","use","bodyParser","urlencoded","extended","json","process","env","NODE_ENV","express","static","get","req","res","sendFile","path","resolve","__dirname","server","listen","PORT","console","info","io","connect","demux","watch"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;AAEA,IAAIA,GAAG,GAAG,uBAAV;AAEAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR,E,CACA;;AACAD,GAAG,CAACC,GAAJ,CAAQC,oBAAWC,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AACAJ,GAAG,CAACC,GAAJ,CAAQC,oBAAWG,IAAX,EAAR;AAEAL,GAAG,CAACC,GAAJ,CAAQ,qBAAR,EAA+B,uBAA/B,E,CAEA;;AACA,IAAIK,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC;AACAR,EAAAA,GAAG,CAACC,GAAJ,CAAQQ,iBAAQC,MAAR,CAAe,gBAAf,CAAR;AAEAV,EAAAA,GAAG,CAACW,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,IAAAA,GAAG,CAACC,QAAJ,CAAaC,IAAI,CAACC,OAAL,CAAaC,SAAb,EAAwB,UAAxB,EAAoC,OAApC,EAA6C,YAA7C,CAAb;AACD,GAFD;AAGD;;AAED,MAAMC,MAAM,GAAGlB,GAAG,CAACmB,MAAJ,CAAWb,OAAO,CAACC,GAAR,CAAYa,IAAvB,EAA6B,MAC1CC,OAAO,CAACC,IAAR,CAAc,qCAAoChB,OAAO,CAACC,GAAR,CAAYa,IAAK,GAAnE,CADa,CAAf;;AAIAG,YAAGC,OAAH,CAAWN,MAAX;;AAEAO,eAAMC,KAAN","sourcesContent":["import \"dotenv/config\";\nimport express from \"express\";\nimport cors from \"cors\";\nimport bodyParser from \"body-parser\";\nimport demux from \"./services/demux\";\nimport io from \"./utils/io\";\n\nimport profile from \"./routes/profile\";\n\nlet app = express();\n\napp.use(cors());\n// Body parser middleware\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(bodyParser.json());\n\napp.use(\"/v1/witness/profile\", profile());\n\n// Server static assets if in production\nif (process.env.NODE_ENV === \"production\") {\n  // Set static folder\n  app.use(express.static(\"frontend/build\"));\n\n  app.get(\"*\", (req, res) => {\n    res.sendFile(path.resolve(__dirname, \"frontend\", \"build\", \"index.html\"));\n  });\n}\n\nconst server = app.listen(process.env.PORT, () =>\n  console.info(`Witness.io dapp listening on port ${process.env.PORT}!`)\n);\n\nio.connect(server);\n\ndemux.watch();\n"],"file":"index.js"}